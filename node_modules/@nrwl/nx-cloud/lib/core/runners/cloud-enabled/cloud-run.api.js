const a2_0x5782=['getBranch','CloudRunApi','success','error','package.json','stack','startRun','stringify','endRun','parse','gzip','assign','__awaiter','readFileSync','@nrwl/workspace/src/utilities/output','Invalid\x20Nx\x20Cloud\x20response:\x20','nxCloudVersion','extractErrorMessage','runContext','getRunGroup','Run\x20Details:','status','axiosException','throw','Invalid\x20end\x20run\x20response:\x20','defaults','__esModule','done','util','apply','/nx-cloud/runs/start','value','../../../utilities/environment','urls','runUrl','@nrwl/nx-cloud','post','application/octet-stream','data','apiAxiosInstance','string','messages','../../../utilities/axios','headers','output','from','devDependencies','message','next','promisify','machineInfo','api','zlib','Run\x20completion\x20responded\x20with\x20`undefined`.','axiosMultipleTries','defineProperty','apiError'];(function(_0x4180d6,_0x57828a){const _0x32b8ae=function(_0x24a1e5){while(--_0x24a1e5){_0x4180d6['push'](_0x4180d6['shift']());}};_0x32b8ae(++_0x57828a);}(a2_0x5782,0x177));const a2_0x32b8=function(_0x4180d6,_0x57828a){_0x4180d6=_0x4180d6-0x0;let _0x32b8ae=a2_0x5782[_0x4180d6];return _0x32b8ae;};'use strict';var __awaiter=this&&this[a2_0x32b8('0x24')]||function(_0x10c0f7,_0x1ecc1d,_0x3ce7b7,_0x4e062e){function _0x3289fe(_0x38db49){return _0x38db49 instanceof _0x3ce7b7?_0x38db49:new _0x3ce7b7(function(_0x346bee){_0x346bee(_0x38db49);});}return new(_0x3ce7b7||(_0x3ce7b7=Promise))(function(_0x1b33e9,_0x350cc8){function _0x45a367(_0x1a581d){try{_0x34f9dc(_0x4e062e[a2_0x32b8('0xf')](_0x1a581d));}catch(_0x1da369){_0x350cc8(_0x1da369);}}function _0x3a1325(_0x572090){try{_0x34f9dc(_0x4e062e[a2_0x32b8('0x2f')](_0x572090));}catch(_0x47bab2){_0x350cc8(_0x47bab2);}}function _0x34f9dc(_0x3cf64c){_0x3cf64c[a2_0x32b8('0x33')]?_0x1b33e9(_0x3cf64c[a2_0x32b8('0x37')]):_0x3289fe(_0x3cf64c[a2_0x32b8('0x37')])['then'](_0x45a367,_0x3a1325);}_0x34f9dc((_0x4e062e=_0x4e062e[a2_0x32b8('0x35')](_0x10c0f7,_0x1ecc1d||[]))[a2_0x32b8('0xf')]());});};Object[a2_0x32b8('0x16')](exports,a2_0x32b8('0x32'),{'value':!![]});exports[a2_0x32b8('0x19')]=void 0x0;const output_1=require(a2_0x32b8('0x26'));const axios_1=require(a2_0x32b8('0x9'));const environment_1=require(a2_0x32b8('0x38'));const fs_1=require('fs');const zlib_1=require(a2_0x32b8('0x13'));const util_1=require(a2_0x32b8('0x34'));class CloudRunApi{constructor(_0x17c7eb,_0x4ce23b,_0x17ef03,_0x599329){this[a2_0x32b8('0x8')]=_0x17c7eb;this[a2_0x32b8('0x2a')]=_0x4ce23b;this[a2_0x32b8('0x11')]=_0x599329;this[a2_0x32b8('0x6')]=axios_1['createApiAxiosInstance'](_0x17ef03);}[a2_0x32b8('0x1e')](_0x44f702,_0x59aca4){return __awaiter(this,void 0x0,void 0x0,function*(){try{const _0x1f723a=yield axios_1[a2_0x32b8('0x15')](()=>this[a2_0x32b8('0x6')][a2_0x32b8('0x3')](a2_0x32b8('0x36'),{'meta':{'nxCloudVersion':this['nxCloudVersion']()},'branch':environment_1[a2_0x32b8('0x18')](),'runGroup':environment_1[a2_0x32b8('0x2b')](),'distributedExecutionId':_0x44f702,'hashes':_0x59aca4}),environment_1['NUMBER_OF_TRIES']);if(_0x1f723a[a2_0x32b8('0x5')]&&_0x1f723a[a2_0x32b8('0x5')][a2_0x32b8('0xe')]){this[a2_0x32b8('0x8')][a2_0x32b8('0xe')]=_0x1f723a[a2_0x32b8('0x5')][a2_0x32b8('0xe')];}if(!_0x1f723a[a2_0x32b8('0x5')]||!_0x1f723a[a2_0x32b8('0x5')][a2_0x32b8('0x0')]){this[a2_0x32b8('0x8')][a2_0x32b8('0x17')]=a2_0x32b8('0x27')+JSON[a2_0x32b8('0x1f')](_0x1f723a[a2_0x32b8('0x5')]);return{};}return _0x1f723a[a2_0x32b8('0x5')]['urls'];}catch(_0x466ee5){this[a2_0x32b8('0x8')]['apiError']=this[a2_0x32b8('0x8')][a2_0x32b8('0x29')](_0x466ee5,'api');return{};}});}[a2_0x32b8('0x20')](_0x5570e6,_0x425acf){var _0x426589;return __awaiter(this,void 0x0,void 0x0,function*(){try{if(this[a2_0x32b8('0x8')][a2_0x32b8('0x17')])return![];const _0x5e19ca={'meta':{'nxCloudVersion':this[a2_0x32b8('0x28')]()},'tasks':_0x425acf,'run':_0x5570e6,'machineInfo':this['machineInfo']};const _0xb2adb5=Buffer[a2_0x32b8('0xc')](JSON[a2_0x32b8('0x1f')](_0x5e19ca));const _0x2b20e9=yield util_1[a2_0x32b8('0x10')](zlib_1[a2_0x32b8('0x22')])(_0xb2adb5);const _0x4309f3=yield axios_1[a2_0x32b8('0x15')](()=>this[a2_0x32b8('0x6')][a2_0x32b8('0x3')]('/nx-cloud/runs/end',_0x2b20e9,{'headers':Object[a2_0x32b8('0x23')](Object[a2_0x32b8('0x23')]({},this['apiAxiosInstance'][a2_0x32b8('0x31')][a2_0x32b8('0xa')]),{'Content-Encoding':'gzip','Content-Type':a2_0x32b8('0x4')})}),environment_1['NUMBER_OF_TRIES']);if(_0x4309f3){if(_0x4309f3[a2_0x32b8('0x5')]&&_0x4309f3[a2_0x32b8('0x5')][a2_0x32b8('0x1')]&&_0x4309f3[a2_0x32b8('0x5')][a2_0x32b8('0x2d')]===a2_0x32b8('0x1a')){this['runContext'][a2_0x32b8('0x1')]=_0x4309f3[a2_0x32b8('0x5')][a2_0x32b8('0x1')];return!![];}if(_0x4309f3[a2_0x32b8('0x5')]&&_0x4309f3[a2_0x32b8('0x5')][a2_0x32b8('0x2d')]){this[a2_0x32b8('0x8')][a2_0x32b8('0x17')]='Invalid\x20end\x20run\x20response:\x20'+JSON[a2_0x32b8('0x1f')](_0x4309f3['data'][a2_0x32b8('0xe')]);}else if(_0x4309f3[a2_0x32b8('0x5')]&&typeof _0x4309f3[a2_0x32b8('0x5')]===a2_0x32b8('0x7')){if(_0x4309f3[a2_0x32b8('0x5')]!=='success'){this['messages'][a2_0x32b8('0x17')]='Invalid\x20end\x20run\x20response:\x20'+JSON['stringify'](_0x4309f3['data']);}}else{this[a2_0x32b8('0x8')][a2_0x32b8('0x17')]=a2_0x32b8('0x30')+JSON[a2_0x32b8('0x1f')](_0x4309f3[a2_0x32b8('0x5')]);}if(environment_1['VERBOSE_LOGGING']){output_1[a2_0x32b8('0xb')]['note']({'title':'Invalid\x20end\x20run\x20response','bodyLines':[JSON[a2_0x32b8('0x1f')](_0x4309f3['data'],null,0x2)]});}}else{output_1['output'][a2_0x32b8('0x1b')]({'title':'Nx\x20Cloud:\x20Unknown\x20Error\x20Occurred','bodyLines':[a2_0x32b8('0x14'),a2_0x32b8('0x2c'),JSON['stringify'](_0x5570e6,null,0x2),'Stack\x20Trace:',JSON['stringify'](new Error()[a2_0x32b8('0x1d')],null,0x2)]});}return![];}catch(_0xb3b3fb){const _0x5b7618=(_0x426589=_0xb3b3fb[a2_0x32b8('0x2e')])!==null&&_0x426589!==void 0x0?_0x426589:_0xb3b3fb;this[a2_0x32b8('0x8')][a2_0x32b8('0x17')]=this['messages'][a2_0x32b8('0x29')](_0x5b7618,a2_0x32b8('0x12'));return![];}});}[a2_0x32b8('0x28')](){try{const _0x11185c=JSON[a2_0x32b8('0x21')](fs_1[a2_0x32b8('0x25')](a2_0x32b8('0x1c'))['toString']());return _0x11185c[a2_0x32b8('0xd')][a2_0x32b8('0x2')];}catch(_0x4383e3){return'unknown';}}}exports[a2_0x32b8('0x19')]=CloudRunApi;