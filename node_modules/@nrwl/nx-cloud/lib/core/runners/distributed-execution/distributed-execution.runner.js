const a7_0x4c9f=['../../../utilities/environment','output','runUrl','VERBOSE_LOGGING','getOutputs','completedTasks','Cache','__awaiter','axiosException','tasks','Starting\x20distributed\x20command\x20execution','Retrieving\x20artifacts\x20from\x20','startTask','@nrwl/workspace/src/utilities/output','COMPLETED','assign','DistributedExecutionApi','See\x20run\x20details\x20at\x20','nx.json','parse','write','readFileSync','../../file-storage/file-storage','unparse','apply','terminalOutput','error:\x20','Found\x20unknown\x20task:\x20','nodes','../../file-storage/e2e-encryption','Successfully\x20completed\x20running\x20the\x20command.','hash','size','printRunGroupError','dependencies','configuration','Command\x20execution\x20failed.','strip-json-comments','addVerticalSeparator','getRunGroup','target','projectGraph','nxCloudDistributedTasksRunner','value','map','../../error/print-run-group-error','defineProperty','FileStorage','projects','self','log','status','./node_modules/.cache/nx','join','completeRunGroupWithError','then','createTaskGraph','../../../utilities/create-no-new-messages-timeout','get','catch','url','Extracting\x20artifacts','lifeCycle','Waiter','Observable','build','wait','createStartRequest','executionStatus:\x20','@nrwl/workspace/src/tasks-runner/cache','criticalErrorMessage','defaultTargetDependencies','length','exit','has','ENCRYPTION_KEY','targetDependencies','E2EEncryption','next','scheduleTask','copyFilesFromCache','./distributed-execution.api','createNoNewMessagesTimeout','rxjs/internal/Observable','@nrwl/workspace/src/tasks-runner/utils','push','reset','retrieve','Status\x20update','executionStatus','Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','../../../utilities/waiter','executionId:\x20','taskId','note','endTask','Unable\x20to\x20complete\x20a\x20run.','throw','project','delete','splitTasksIntoStages','error','stdout','find','__esModule','encryptionKey','overrides','commandStatus','Distributed\x20Execution\x20Terminated','Error:','cacheDirectory','message'];(function(_0x1ba93d,_0x4c9f0f){const _0x42553f=function(_0xad4e3d){while(--_0xad4e3d){_0x1ba93d['push'](_0x1ba93d['shift']());}};_0x42553f(++_0x4c9f0f);}(a7_0x4c9f,0xd8));const a7_0x4255=function(_0x1ba93d,_0x4c9f0f){_0x1ba93d=_0x1ba93d-0x0;let _0x42553f=a7_0x4c9f[_0x1ba93d];return _0x42553f;};'use strict';var __awaiter=this&&this[a7_0x4255('0xf')]||function(_0x245f4a,_0x4554a7,_0x4ffad3,_0x3bdaf3){function _0x123642(_0x8d89ba){return _0x8d89ba instanceof _0x4ffad3?_0x8d89ba:new _0x4ffad3(function(_0x448b63){_0x448b63(_0x8d89ba);});}return new(_0x4ffad3||(_0x4ffad3=Promise))(function(_0x24f7ad,_0x3fe69a){function _0x1660b8(_0x505c03){try{_0x20a24b(_0x3bdaf3['next'](_0x505c03));}catch(_0x2b1a3f){_0x3fe69a(_0x2b1a3f);}}function _0x178abc(_0x120aec){try{_0x20a24b(_0x3bdaf3[a7_0x4255('0x69')](_0x120aec));}catch(_0x15cc5e){_0x3fe69a(_0x15cc5e);}}function _0x20a24b(_0x3bdca8){_0x3bdca8['done']?_0x24f7ad(_0x3bdca8[a7_0x4255('0x33')]):_0x123642(_0x3bdca8[a7_0x4255('0x33')])['then'](_0x1660b8,_0x178abc);}_0x20a24b((_0x3bdaf3=_0x3bdaf3[a7_0x4255('0x20')](_0x245f4a,_0x4554a7||[]))[a7_0x4255('0x56')]());});};Object[a7_0x4255('0x36')](exports,a7_0x4255('0x0'),{'value':!![]});exports[a7_0x4255('0x32')]=void 0x0;const Observable_1=require(a7_0x4255('0x5b'));const cache_1=require(a7_0x4255('0x4d'));const output_1=require(a7_0x4255('0x15'));const utils_1=require(a7_0x4255('0x5c'));const stripJsonComments=require(a7_0x4255('0x2d'));const fs_1=require('fs');const distributed_execution_api_1=require(a7_0x4255('0x59'));const file_storage_1=require(a7_0x4255('0x1e'));const e2e_encryption_1=require(a7_0x4255('0x25'));const waiter_1=require(a7_0x4255('0x63'));const environment_1=require(a7_0x4255('0x8'));const print_run_group_error_1=require(a7_0x4255('0x35'));const create_no_new_messages_timeout_1=require(a7_0x4255('0x41'));class NoopLifeCycle{[a7_0x4255('0x57')](_0x51183a){}[a7_0x4255('0x14')](_0x13e2c4){}[a7_0x4255('0x67')](_0x4ab680,_0xba7384){}}function runDistributedExecution(_0x26422f,_0x5c8697,_0x25b5f3,_0x10f225,_0x316354,_0x2b69b3,_0x597544){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3c1882=JSON[a7_0x4255('0x1b')](stripJsonComments(fs_1[a7_0x4255('0x1d')](a7_0x4255('0x1a'))['toString']()));const _0x3a0a38=new TaskOrderer(_0x25b5f3[a7_0x4255('0x31')],getDefaultDependencyConfigs(_0x3c1882,_0x5c8697))[a7_0x4255('0x6c')](_0x597544);const _0x384fff=yield _0x26422f['start'](distributed_execution_api_1[a7_0x4255('0x4b')](_0x2b69b3,_0x3a0a38,_0x5c8697));return yield processTasks(_0x26422f,_0x10f225,_0x316354,_0x5c8697,_0x384fff,_0x597544,_0x25b5f3);});}function processTasks(_0x5a73be,_0x583f85,_0x5b23c4,_0x2c55a1,_0x46d9e5,_0x4ebeee,_0x3ed123){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x30820d={};const _0x20974a=create_no_new_messages_timeout_1[a7_0x4255('0x5a')]();const _0x14c154=new waiter_1[(a7_0x4255('0x47'))]();while(!![]){if(environment_1[a7_0x4255('0xb')]){output_1['output']['note']({'title':'Waiting...'});}yield _0x14c154[a7_0x4255('0x4a')]();const _0x3584c3=yield _0x5a73be[a7_0x4255('0x3b')](_0x46d9e5);if(environment_1['VERBOSE_LOGGING']){output_1['output'][a7_0x4255('0x66')]({'title':a7_0x4255('0x60'),'bodyLines':[a7_0x4255('0x64')+_0x46d9e5,a7_0x4255('0x4c')+_0x3584c3[a7_0x4255('0x61')],'number\x20of\x20completed\x20tasks:\x20'+_0x3584c3['completedTasks'][a7_0x4255('0x50')],a7_0x4255('0x22')+_0x3584c3[a7_0x4255('0x4e')]]});}if(_0x3584c3[a7_0x4255('0x4e')]){output_1[a7_0x4255('0x9')][a7_0x4255('0x6d')]({'title':a7_0x4255('0x4'),'bodyLines':[a7_0x4255('0x5'),_0x3584c3[a7_0x4255('0x4e')]]});process[a7_0x4255('0x51')](0x1);}_0x20974a(_0x3584c3[a7_0x4255('0xd')][a7_0x4255('0x50')]);for(const _0x4d8919 of _0x3584c3[a7_0x4255('0xd')]){if(_0x30820d[_0x4d8919[a7_0x4255('0x65')]])continue;yield processTask(_0x583f85,_0x5b23c4,_0x3ed123,_0x2c55a1,_0x4ebeee,_0x4d8919);_0x14c154[a7_0x4255('0x5e')]();_0x30820d[_0x4d8919['taskId']]=!![];}if(_0x3584c3[a7_0x4255('0x61')]===a7_0x4255('0x16')){return{'commandStatus':_0x3584c3['commandStatus'],'runUrl':_0x3584c3['runUrl']};}}});}function processTask(_0x49cfc3,_0xd5228e,_0x3a72b8,_0x1099ef,_0x2b06e2,_0x37e08c){return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1['VERBOSE_LOGGING']){output_1[a7_0x4255('0x9')][a7_0x4255('0x66')]({'title':'Processing\x20task\x20'+_0x37e08c[a7_0x4255('0x65')]});}const _0x30b855=_0x2b06e2[a7_0x4255('0x6f')](_0x3101df=>_0x37e08c[a7_0x4255('0x65')]===_0x3101df['id']);if(!_0x30b855){throw new Error(a7_0x4255('0x23')+_0x37e08c[a7_0x4255('0x65')]);}if(environment_1[a7_0x4255('0xb')]){output_1[a7_0x4255('0x9')]['note']({'title':a7_0x4255('0x13')+_0x37e08c[a7_0x4255('0x44')]});}yield _0x49cfc3[a7_0x4255('0x5f')](_0x37e08c[a7_0x4255('0x27')],_0x37e08c[a7_0x4255('0x44')],_0x1099ef[a7_0x4255('0x6')]||a7_0x4255('0x3c'));const _0x50c2d8=yield _0xd5228e[a7_0x4255('0x42')](Object[a7_0x4255('0x17')](Object[a7_0x4255('0x17')]({},_0x30b855),{'hash':_0x37e08c[a7_0x4255('0x27')]}));const _0x50721a=utils_1[a7_0x4255('0xc')](_0x3a72b8[a7_0x4255('0x31')][a7_0x4255('0x24')],_0x30b855);if(environment_1[a7_0x4255('0xb')]){output_1[a7_0x4255('0x9')][a7_0x4255('0x66')]({'title':a7_0x4255('0x45'),'bodyLines':_0x50721a});}yield _0xd5228e[a7_0x4255('0x58')](_0x37e08c[a7_0x4255('0x27')],_0x50c2d8,_0x50721a);output_1[a7_0x4255('0x9')]['logCommand'](getCommand(_0x30b855));process[a7_0x4255('0x6e')][a7_0x4255('0x1c')](_0x50c2d8[a7_0x4255('0x21')]);output_1[a7_0x4255('0x9')][a7_0x4255('0x2e')]();});}function getCommand(_0x59c68e){const _0x5a6924=utils_1[a7_0x4255('0x1f')](_0x59c68e[a7_0x4255('0x2')]||{});const _0x3c2079=_0x59c68e[a7_0x4255('0x30')][a7_0x4255('0x2b')]?':'+_0x59c68e[a7_0x4255('0x30')][a7_0x4255('0x2b')]:'';return['nx','run',_0x59c68e[a7_0x4255('0x30')][a7_0x4255('0x6a')]+':'+_0x59c68e[a7_0x4255('0x30')][a7_0x4255('0x30')]+_0x3c2079,..._0x5a6924][a7_0x4255('0x3d')]('\x20');}const nxCloudDistributedTasksRunner=(_0x5aae1b,_0x276128,_0x1d2409)=>{if(environment_1[a7_0x4255('0xb')]){output_1[a7_0x4255('0x9')][a7_0x4255('0x66')]({'title':a7_0x4255('0x12')});}_0x276128[a7_0x4255('0x46')]=new NoopLifeCycle();const _0x3ebf3c=environment_1[a7_0x4255('0x2f')]();if(!_0x3ebf3c){print_run_group_error_1[a7_0x4255('0x29')]();return process[a7_0x4255('0x51')](0x1);}const _0x5ddc00=new e2e_encryption_1[(a7_0x4255('0x55'))](environment_1[a7_0x4255('0x53')]||_0x276128[a7_0x4255('0x1')]);const _0x3461c8=new file_storage_1[(a7_0x4255('0x37'))](_0x5ddc00,0x3);const _0x28d095=new cache_1[(a7_0x4255('0xe'))](_0x276128);const _0x5d8bdd=new distributed_execution_api_1[(a7_0x4255('0x18'))](_0x276128);runDistributedExecution(_0x5d8bdd,_0x276128,_0x1d2409,_0x3461c8,_0x28d095,_0x3ebf3c,_0x5aae1b)[a7_0x4255('0x3f')](_0x1cdc07=>{if(_0x1cdc07[a7_0x4255('0x3')]===0x0){output_1[a7_0x4255('0x9')]['success']({'title':a7_0x4255('0x26'),'bodyLines':[a7_0x4255('0x19')+_0x1cdc07[a7_0x4255('0xa')]]});}else{output_1[a7_0x4255('0x9')][a7_0x4255('0x6d')]({'title':a7_0x4255('0x2c'),'bodyLines':[a7_0x4255('0x19')+_0x1cdc07['runUrl']]});}process[a7_0x4255('0x51')](_0x1cdc07['commandStatus']);})[a7_0x4255('0x43')](_0x3933c0=>{output_1[a7_0x4255('0x9')][a7_0x4255('0x6d')]({'title':a7_0x4255('0x68'),'bodyLines':[_0x3933c0['message']]});if(_0x3933c0['axiosException']){console[a7_0x4255('0x3a')](_0x3933c0[a7_0x4255('0x10')]);}else{console[a7_0x4255('0x3a')](_0x3933c0);}_0x5d8bdd[a7_0x4255('0x3e')](_0x3ebf3c,a7_0x4255('0x62')+_0x3933c0[a7_0x4255('0x7')]+'\x22')['finally'](()=>process[a7_0x4255('0x51')](0x1));});return new Observable_1[(a7_0x4255('0x48'))](()=>{});};exports[a7_0x4255('0x32')]=nxCloudDistributedTasksRunner;class TaskOrderer{constructor(_0x4817de,_0x5d94a1){this['projectGraph']=_0x4817de;this[a7_0x4255('0x4f')]=_0x5d94a1;}[a7_0x4255('0x6c')](_0x4524f8){if(_0x4524f8[a7_0x4255('0x50')]===0x0)return[];const _0x54f51b=[];const _0x46e136=this[a7_0x4255('0x40')](_0x4524f8);const _0xf56638=new Set(_0x4524f8[a7_0x4255('0x34')](_0x5d4bf2=>_0x5d4bf2['id']));let _0x4c99f4=0x0;while(_0xf56638[a7_0x4255('0x28')]>0x0){const _0x4d5270=_0x54f51b[_0x4c99f4]=[];for(const _0x23f52a of _0xf56638){let _0x46e7aa=!![];for(const _0x2030c4 of _0x46e136[a7_0x4255('0x2a')][_0x23f52a]){if(_0xf56638[a7_0x4255('0x52')](_0x2030c4)){_0x46e7aa=![];break;}}if(!_0x46e7aa){continue;}const _0x51b5b5=_0x46e136[a7_0x4255('0x11')][_0x23f52a];_0x4d5270[a7_0x4255('0x5d')](_0x51b5b5);}for(const _0x325537 of _0x4d5270){_0xf56638[a7_0x4255('0x6b')](_0x325537['id']);}_0x4c99f4++;}return _0x54f51b;}[a7_0x4255('0x40')](_0x56a6a8){const _0x5d370f={'tasks':{},'dependencies':{}};for(const _0x2b10e7 of _0x56a6a8){_0x5d370f[a7_0x4255('0x11')][_0x2b10e7['id']]=_0x2b10e7;_0x5d370f[a7_0x4255('0x2a')][_0x2b10e7['id']]=[];const _0x350dfb=utils_1['getDependencyConfigs'](_0x2b10e7[a7_0x4255('0x30')],this['defaultTargetDependencies'],this[a7_0x4255('0x31')]);if(!_0x350dfb){continue;}const _0x56b242=new Set(this['projectGraph'][a7_0x4255('0x2a')][_0x2b10e7[a7_0x4255('0x30')][a7_0x4255('0x6a')]][a7_0x4255('0x34')](_0x3c1f0f=>_0x3c1f0f['target']));for(const _0x155720 of _0x350dfb){if(_0x155720[a7_0x4255('0x38')]===a7_0x4255('0x39')){for(const _0x2b5560 of _0x56a6a8){if(_0x2b5560['target'][a7_0x4255('0x6a')]===_0x2b10e7['target'][a7_0x4255('0x6a')]&&_0x2b5560[a7_0x4255('0x30')]['target']===_0x155720['target']){_0x5d370f[a7_0x4255('0x2a')][_0x2b10e7['id']][a7_0x4255('0x5d')](_0x2b5560['id']);}}}else if(_0x155720[a7_0x4255('0x38')]===a7_0x4255('0x2a')){for(const _0x262663 of _0x56a6a8){if(_0x56b242[a7_0x4255('0x52')](_0x262663[a7_0x4255('0x30')][a7_0x4255('0x6a')])&&_0x262663[a7_0x4255('0x30')]['target']===_0x155720[a7_0x4255('0x30')]){_0x5d370f[a7_0x4255('0x2a')][_0x2b10e7['id']][a7_0x4255('0x5d')](_0x262663['id']);}}}}}return _0x5d370f;}}function getDefaultDependencyConfigs(_0x49d5c2,_0x5d9074){var _0x55efad,_0x49cd64;const _0x595c79=(_0x55efad=_0x49d5c2[a7_0x4255('0x54')])!==null&&_0x55efad!==void 0x0?_0x55efad:{};const _0x3be6dd=_0x5d9074?(_0x49cd64=_0x5d9074['strictlyOrderedTargets'])!==null&&_0x49cd64!==void 0x0?_0x49cd64:[a7_0x4255('0x49')]:[];for(const _0x18f49b of _0x3be6dd){_0x595c79[_0x18f49b]=_0x595c79[_0x18f49b]||[];_0x595c79[_0x18f49b][a7_0x4255('0x5d')]({'target':_0x18f49b,'projects':a7_0x4255('0x2a')});}return _0x595c79;}